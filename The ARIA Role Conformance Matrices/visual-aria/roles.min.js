/*
Visual ARIA Bookmarklet
Copyright 2015 Bryan Garaventa (http://whatsock.com/training/matrices/visual-aria.htm)
Part of the ARIA Role Conformance Matrices, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
(function(){if(!document.getElementById("ws-bm-aria-matrices-lnk")){var b=document.createElement("span");b.className="WS-BM-Loading-Msg";b.innerHTML='<span role="alert" style="position: fixed; z-index:10000; color: white; background-color: black; border: inset thick gray; top: 40%; left: 35%; padding: 20px; font-size: 18pt;">Loading Visual ARIA, please wait.</span>';document.body.appendChild(b)}var c=function(f,g,e){f="aria-disabled,aria-readonly,aria-haspopup,aria-orientation,aria-label,aria-labelledby,aria-describedby,aria-pressed,aria-checked,aria-valuemin,aria-valuemax,aria-valuenow,aria-valuetext,aria-controls,aria-autocomplete,aria-expanded,aria-owns,aria-activedescendant,aria-posinset,aria-setsize,aria-level,role".split(",");g=function(i,h){while(i){i=i.parentNode;if(i.getAttribute("role")==h){return"true"}}return"false"};e=function(k,m,u,w,y,v){k=document.querySelectorAll('input, img[role], img[aria-label], img[aria-labelledby], img[aria-describedby], img[aria-haspopup="true"], img[aria-selected], progress');m={};for(var n=0;n<k.length;n++){for(var l=0;l<f.length;l++){m[f[l]]=k[n].getAttribute(f[l])||null}m["node-name"]=k[n].nodeName.toLowerCase();m.tabindex=k[n].getAttribute("tabindex");m["input-type"]=m["node-name"]=="input"?k[n].getAttribute("type"):null;if(m.role=="radio"){m["role-nested"]=g(k[n],"radiogroup")}else{if(m.role=="tab"){m["role-nested"]=g(k[n],"tablist")}else{if(m.role=="treeitem"){m["role-nested"]=g(k[n],"tree")}}}if(y!=k[n].parentNode){y=k[n].parentNode;for(var x in m){if(m[x]||!isNaN(parseInt(m[x]))){y.setAttribute("data-ws-bm-"+x,m[x])}else{y.removeAttribute("data-ws-bm-"+x)}}}}w=document.querySelectorAll("*[aria-describedby]:focus");if(w.length){var s=w[0].getAttribute("aria-describedby").split(" ");for(var r=0;r<s.length;r++){var z=document.getElementById(s[r]);if(z&&z.nodeType===1){z.setAttribute("data-ws-bm-db-match",s[r])}}}v=document.querySelectorAll('*[hidefocus="true"]');for(var o=0;o<v.length;o++){v[o].removeAttribute("hidefocus")}(function(){var j=function(A){if(!A||A.nodeType!==1){return}var B=function(N){if(typeof N!=="string"){return""}return N.replace(/^\s+|\s+$/g,"")},L=function(O,N){if(!O){return}N(O);O=O.firstChild;while(O){L(O,N);O=O.nextSibling}},G=function(O,N){if(O==N){return false}while(O){O=O.parentNode;if(O.getAttribute&&O.getAttribute("aria-label")){return true}else{if(O==N){return false}}}return false},J="",C="",E="",t=A.getAttribute("aria-describedby")||"",H=A.getAttribute("title")||"",K=false;var I=function(P,O){var N="";L(P,function(W){if(K||!W){return}var S="";if(W.nodeType===1){var V=W.getAttribute("aria-labelledby")||"",R=W.getAttribute("aria-label")||"",U=W.getAttribute("title")||""}if(W.nodeType===1&&((!W.firstChild||(W==P&&(V||R)))||(W.firstChild&&W!=P&&R))){if(!O&&W==P&&V){var Q=V.split(" ");for(var T=0;T<Q.length;T++){S+=I(document.getElementById(Q[T]),true)+" "}S=B(S);if(S){K=true}}if(!S&&R){S=B(R);if(S&&W==P){K=true}}if(!S&&(W.nodeName.toLowerCase()=="input"||W.nodeName.toLowerCase()=="select")&&W.id&&document.querySelectorAll('label[for="'+W.id+'"]').length){S=B(I(document.querySelectorAll('label[for="'+W.id+'"]')[0],true))}if(!S&&((W.nodeName.toLowerCase()=="input"&&W.getAttribute("type")=="image")||W.nodeName.toLowerCase()=="img")&&(B(W.getAttribute("alt"))||U)){S=B(W.getAttribute("alt")||U)}}else{if(W.nodeType===3){S=B(W.data)}}if(S&&!G(W,P)){N+=" "+S}});return N};J=I(A);if(H){E=B(H)}if(t){var M="",F=t.split(" ");for(var D=0;D<F.length;D++){M+=I(document.getElementById(F[D]),true)+" "}M=B(M);if(M){E=M}}if(E){C=E}if(A.nodeName.toLowerCase()=="input"||A.nodeName.toLowerCase()=="img"||A.nodeName.toLowerCase()=="progress"){A.parentNode.setAttribute("data-ws-bm-name-prop",B(J));A.parentNode.setAttribute("data-ws-bm-desc-prop",B(C))}else{A.setAttribute("data-ws-bm-name-prop",B(J));A.setAttribute("data-ws-bm-desc-prop",B(C))}};var i=document.querySelectorAll('input, select, button, a[href], progress, *[role="button"], *[role="checkbox"], *[role="link"], *[role="searchbox"], *[role="scrollbar"], *[role="slider"], *[role="spinbutton"], *[role="switch"], *[role="textbox"], *[role="combobox"]');for(var h=0;h<i.length;h++){j(i[h])}})();u=document.querySelectorAll("frame, iframe");for(var p=0;p<u.length;p++){try{if(u[p].contentDocument&&u[p].contentDocument.head&&!u[p].contentDocument.WSBMInit){u[p].contentDocument.WSBMInit=c;u[p].contentDocument.WSBMInit()}}catch(q){}}setTimeout(e,2000)};var d=document.createElement("link");d.type="text/css";d.rel="stylesheet";d.href="https://gutterstar.bizland.com/whatsock/training/matrices/visual-aria/roles.css";document.head.appendChild(d);e()};c();if(!document.getElementById("ws-bm-aria-matrices-lnk")){var a=document.createElement("span");a.innerHTML='<span id="ws-bm-aria-matrices-lnk" style="position: fixed; top: 0; left: 0;padding: 3px; border: 1px solid #dedede; background: #f5f5f5; filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#f9f9f9\', endColorstr=\'#f0f0f0\'); background: -webkit-gradient(linear, left top, left bottom, from(#f9f9f9), to(#f0f0f0)); background: -moz-linear-gradient(top,  #f9f9f9, #f0f0f0); border-color: #000; -webkit-box-shadow: 0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb; -moz-box-shadow: 0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb; box-shadow: 0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;"><a style="display: inline-block; text-decoration: none; font-size: 12pt; padding: 6px 9px; border: 1px solid #dedede; -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; background: #525252; filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#5e5e5e\', endColorstr=\'#434343\'); background: -webkit-gradient(linear, left top, left bottom, from(#5e5e5e), to(#434343)); background: -moz-linear-gradient(top,  #5e5e5e, #434343); border-color: #4c4c4c #313131 #1f1f1f; color: #fff; text-shadow: 0 1px 0 #2e2e2e; -webkit-box-shadow: 0 1px 1px #afafaf, inset 0 1px 0 #868686; -moz-box-shadow: 0 1px 1px #afafaf, inset 0 1px 0 #868686; box-shadow: 0 1px 1px #afafaf, inset 0 1px 0 #868686;" target="_blank" href="http://whatsock.com/training/matrices/"><span>ARIA Role Matrices</span></a></span>';document.body.appendChild(a)}})();